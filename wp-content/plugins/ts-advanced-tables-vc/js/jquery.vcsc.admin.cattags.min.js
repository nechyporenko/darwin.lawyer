!function(e){jQuery(document).ready(function(){function t(e){return jQuery.trim(e).replace(/[^a-z0-9-]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").toLowerCase()}var a=[],i=[];if(void 0===s||null===s)if(void 0!=jQuery("html").css("boxSizing")&&"border-box"==jQuery("html").css("boxSizing"))s=jQuery("#wpadminbar").length>0?parseInt(jQuery("html").css("marginTop").replace("px","")):0;else var s=0;jQuery("form#ts-advanced-table-cattags-form").submit(function(e){"1"!==jQuery("#ts-advanced-table-check-true").val()?e.preventDefault():jQuery("form#ts-advanced-table-cattags-form").submit()}),jQuery.isFunction(jQuery.fn.validationEngine)&&jQuery("form#ts-advanced-table-cattags-form").validationEngine("attach",{scroll:!1,focusFirstField:!1,showOneMessage:!0,showPrompts:!0,promptPosition:"inline",validateNonVisibleFields:!0,addSuccessCssClassToField:"Passed",addFailureCssClassToField:"Failed",onValidationComplete:function(t,a){t.attr("data-type");1==a&&(e("#ts-advanced-table-check-true").val("1"),SweetContent=jQuery("#ts-advancedtables-validation-popup-success").html(),TS_VCSC_SweetAlert({title:jQuery("#ts-advancedtables-validation-plugin-name").text(),text:"",html:SweetContent,type:"success",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!0,showCancelButton:!0,showOtherButton:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:jQuery("#ts-advancedtables-validation-popup-yes").text(),cancelButtonText:jQuery("#ts-advancedtables-validation-popup-no").text(),closeOnConfirm:!0,closeOnCancel:!0},function(t){t?(e("form#ts-advanced-table-cattags-form").validationEngine("detach"),setTimeout(function(){e("#ts-advanced-table-check-true").val("1"),e("form#ts-advanced-table-cattags-form").off("submit").dequeue().stop(),e("#ts-advanced-table-trigger-button").trigger("click")},250)):t||e("#ts-advanced-table-check-true").val("0")}))}}),jQuery(".ts-tag-editor-wrapper").each(function(e,t){var a=jQuery(this),i=["&","!","<",">",";","=","#",'"',"°","{","}","_","$","%",".","?","+"];"false"==a.attr("data-initialized")&&(a.find("input").TS_TablesWP_TagEditor({initialTags:[],maxTags:0,maxLength:50,delimiter:a.attr("data-delimiter"),placeholder:a.attr("data-placeholder"),forceLowercase:"true"==a.attr("data-lowercase"),forceNumbersOnly:"true"==a.attr("data-numbersonly"),removeDuplicates:!0,clickDelete:"true"==a.attr("data-clickdelete"),animateDelete:175,sortable:"true"==a.attr("data-sortable"),autocomplete:null,onChange:function(){},beforeTagSave:function(e,t,a,s,n){for(var r in i)n=n.replace(new RegExp(i[r].replace(/([&.*+?^=!:;#°%${}()<>|\[\]\/\\])/g,"\\$1"),"g"),"");return n.length>0&&n},beforeTagDelete:function(){}}),a.attr("data-initialized","true"))});var n=decodeURIComponent(jQuery("#ts-advanced-table-categories-holder").val());try{n=jQuery.parseJSON(n)}catch(e){console.log(e,n),n=[]}if(null!==n&&"object"==typeof n&&jQuery.each(n,function(e,t){var a=t.id,i=t.name,s=t.count,n=t.info;t.hasOwnProperty("children")?(jQuery("#ts-advanced-table-categories-listing").append('<li id="category-'+a+'" data-name="'+i+'" data-info="'+n+'" data-count="'+s+'"><div class="ts-advanced-table-categories-handle"><span class="ts-advanced-table-categories-name">'+i+'</span><span class="ts-advanced-table-categories-count">'+s+'</span><i class="ts-advanced-table-categories-info" data-tooltipset="false"></i><i class="ts-advanced-table-categories-edit"></i><i class="ts-advanced-table-categories-remove"></i></div></li>'),jQuery("#ts-advanced-table-categories-listing").find("li#category-"+a).append("<ol></ol>"),jQuery.each(t.children,function(e,t){var i=t.id,s=t.name,n=t.count,r=t.info;t.hasOwnProperty("children")?(jQuery("#ts-advanced-table-categories-listing").find("li#category-"+a+" ol").append('<li id="category-'+i+'" data-name="'+s+'" data-info="'+r+'" data-count="'+n+'"><div class="ts-advanced-table-categories-handle"><span class="ts-advanced-table-categories-name">'+s+'</span><span class="ts-advanced-table-categories-count">'+n+'</span><i class="ts-advanced-table-categories-info" data-tooltipset="false"></i><i class="ts-advanced-table-categories-edit"></i><i class="ts-advanced-table-categories-remove"></i></div></li>'),jQuery("#ts-advanced-table-categories-listing").find("li#category-"+i).append("<ol></ol>"),jQuery.each(t.children,function(e,t){var a=t.id,s=t.name,n=t.count,r=t.info;jQuery("#ts-advanced-table-categories-listing").find("li#category-"+i+" ol").append('<li id="category-'+a+'" data-name="'+s+'" data-info="'+r+'" data-count="'+n+'"><div class="ts-advanced-table-categories-handle"><span class="ts-advanced-table-categories-name">'+s+'</span><span class="ts-advanced-table-categories-count">'+n+'</span><i class="ts-advanced-table-categories-info" data-tooltipset="false"></i><i class="ts-advanced-table-categories-edit"></i><i class="ts-advanced-table-categories-remove"></i></div></li>')})):jQuery("#ts-advanced-table-categories-listing").find("li#category-"+a+" ol").append('<li id="category-'+i+'" data-name="'+s+'" data-info="'+r+'" data-count="'+n+'"><div class="ts-advanced-table-categories-handle"><span class="ts-advanced-table-categories-name">'+s+'</span><span class="ts-advanced-table-categories-count">'+n+'</span><i class="ts-advanced-table-categories-info" data-tooltipset="false"></i><i class="ts-advanced-table-categories-edit"></i><i class="ts-advanced-table-categories-remove"></i></div></li>')})):jQuery("#ts-advanced-table-categories-listing").append('<li id="category-'+a+'" data-name="'+i+'" data-info="'+n+'" data-count="'+s+'"><div class="ts-advanced-table-categories-handle"><span class="ts-advanced-table-categories-name">'+i+'</span><span class="ts-advanced-table-categories-count">'+s+'</span><i class="ts-advanced-table-categories-info" data-tooltipset="false"></i><i class="ts-advanced-table-categories-edit"></i><i class="ts-advanced-table-categories-remove"></i></div></li>')}),jQuery("#ts-advanced-table-categories-listing").nestedSortable({forcePlaceholderSize:!0,handle:"div",helper:"clone",items:"li",tolerance:"pointer",toleranceElement:"> div",opacity:.6,tabSize:25,isTree:!0,maxLevels:3,disableParentChange:!1,excludeRoot:!0,rootID:"categories",placeholder:"ts-advanced-table-categories-outline"}),jQuery("#ts-advanced-table-addnew-button").on("click",function(e){e.preventDefault(),jQuery("#ts-advanced-table-categories-addnew").attr("value","").attr("data-value","").val("").trigger("change"),TS_VCSC_SweetAlert({title:jQuery("#ts-advanced-table-categories-alert").attr("data-title"),text:"",html:jQuery("#ts-advanced-table-categories-alert").html(),type:"info",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!0,showCancelButton:!0,showOtherButton:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33d33",otherButtonColor:"#d33d33",confirmButtonText:jQuery("#ts-advanced-table-categories-alert").attr("data-submit"),cancelButtonText:jQuery("#ts-advanced-table-categories-alert").attr("data-cancel"),otherButtonText:jQuery("#ts-advanced-table-categories-alert").attr("data-other"),closeOnConfirm:!1,closeOnCancel:!0},function(e,a){if(e){var i=jQuery(".sweet-container").find("#ts-advanced-table-categories-addnew").val(),s=t(i),n=jQuery("#ts-advanced-table-categories-listing").find("li"),r=0,o=jQuery(".sweet-container").find("#ts-advanced-table-categories-summary").val();""!=o&&(o=o.replace(/<[^>]+>/gi,""),o=TS_TablesWP_Base64.encode(o)),""!=i&&(n.each(function(e,t){jQuery(this).attr("id")=="category-"+s&&r++}),0==r?(jQuery(".sweet-container").find(".ts-vcsc-notice-field").fadeOut(),jQuery("#ts-advanced-table-categories-listing").append('<li id="category-'+s+'" data-name="'+i+'" data-info="'+o+'" data-count="0"><div class="ts-advanced-table-categories-handle"><span class="ts-advanced-table-categories-name">'+i+'</span><span class="ts-advanced-table-categories-count">0</span><i class="ts-advanced-table-categories-info" data-tooltipset="false"></i><i class="ts-advanced-table-categories-edit"></i><i class="ts-advanced-table-categories-remove"></i></div></li>'),jQuery("#ts-advanced-table-categories-listing").nestedSortable("refresh"),jQuery("#ts-advanced-table-categories-addnew").attr("value","").attr("data-value","").val("").trigger("change"),jQuery("#ts-advanced-table-categories-summary").attr("data-value","").val("").trigger("change"),TS_VCSC_SweetAlert.closeModal()):jQuery(".sweet-container").find(".ts-vcsc-notice-field").fadeIn())}else if(!e)return!1})}),jQuery("body").on("click",".ts-advanced-table-categories-edit",function(e){e.preventDefault();var i=jQuery(this).parent().parent(),s=jQuery(this).parent().find(".ts-advanced-table-categories-name").text();jQuery("#ts-advanced-table-categories-change").attr("value",s).attr("data-value",s).val(s).trigger("change");var n=i.attr("data-info");""!=n&&(n=TS_TablesWP_Base64.decode(n)),jQuery("#ts-advanced-table-categories-describe").attr("data-value",i.attr("data-info")).text(n).val(n).trigger("change"),TS_VCSC_SweetAlert({title:jQuery("#ts-advanced-table-categories-edit").attr("data-title"),text:"",html:jQuery("#ts-advanced-table-categories-edit").html(),type:"info",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!0,showCancelButton:!0,showOtherButton:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33d33",otherButtonColor:"#d33d33",confirmButtonText:jQuery("#ts-advanced-table-categories-edit").attr("data-submit"),cancelButtonText:jQuery("#ts-advanced-table-categories-edit").attr("data-cancel"),otherButtonText:jQuery("#ts-advanced-table-categories-edit").attr("data-other"),closeOnConfirm:!1,closeOnCancel:!0},function(e,s){if(e){var n=jQuery(".sweet-container").find("#ts-advanced-table-categories-change").val(),r=jQuery(".sweet-container").find("#ts-advanced-table-categories-change").attr("data-value"),o=t(n),l=jQuery(".sweet-container").find("#ts-advanced-table-categories-describe").val();""!=l&&(l=l.replace(/<[^>]+>/gi,""),l=TS_TablesWP_Base64.encode(l));var c=jQuery(".sweet-container").find("#ts-advanced-table-categories-describe").attr("data-value"),d=jQuery("#ts-advanced-table-categories-listing").find("li"),h=0,u={};""!=n&&(n==r&&l==c?(jQuery("#ts-advanced-table-categories-change").attr("value","").attr("data-value","").val("").trigger("change"),jQuery("#ts-advanced-table-categories-describe").attr("data-value","").text("").val("").trigger("change"),TS_VCSC_SweetAlert.closeModal()):(d.each(function(e,t){jQuery(this).attr("id")=="category-"+o&&h++}),0==h||l!=c?(jQuery(".sweet-container").find(".ts-vcsc-notice-field").fadeOut(),n!=r&&(u={slug_old:t(r),slug_new:t(n),name_old:r,name_new:l},a.push(u)),i.attr("id","category-"+o).attr("data-name",n).attr("data-info",l).find(".ts-advanced-table-categories-name").first().html(n),jQuery("#ts-advanced-table-categories-listing").nestedSortable("refresh"),jQuery("#ts-advanced-table-categories-change").attr("value","").attr("data-value","").val("").trigger("change"),jQuery("#ts-advanced-table-categories-describe").attr("data-value","").text("").val("").trigger("change"),TS_VCSC_SweetAlert.closeModal()):h>0&&jQuery(".sweet-container").find(".ts-vcsc-notice-field").fadeIn()))}else if(!e)return!1})}),jQuery("body").on("click",".ts-advanced-table-categories-remove",function(e){e.preventDefault();var a=jQuery(this).parent().parent();if(a.find("ol li").length>0)return TS_VCSC_SweetAlert({title:jQuery("#ts-advanced-table-categories-leveltitle").html(),text:"",html:jQuery("#ts-advanced-table-categories-levelcheck").html(),type:"error",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!0,showCancelButton:!1,showOtherButton:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33d33",otherButtonColor:"#d33d33",confirmButtonText:jQuery("#ts-advancedtables-validation-popup-gotit").html(),cancelButtonText:jQuery("#ts-advancedtables-validation-popup-cancel").html(),otherButtonText:jQuery("#ts-advancedtables-validation-popup-close").html(),closeOnConfirm:!0,closeOnCancel:!0}),!1;TS_VCSC_SweetAlert({title:jQuery("#ts-advanced-table-categories-deletetitle").html(),text:"",html:jQuery("#ts-advanced-table-categories-deletecheck").html(),type:"warning",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!0,showCancelButton:!0,showOtherButton:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33d33",otherButtonColor:"#d33d33",confirmButtonText:jQuery("#ts-advancedtables-validation-popup-yes").html(),cancelButtonText:jQuery("#ts-advancedtables-validation-popup-no").html(),otherButtonText:jQuery("#ts-advancedtables-validation-popup-close").html(),closeOnConfirm:!0,closeOnCancel:!0},function(e,s){if(e){var n=a.attr("id"),r=a.attr("data-name"),o={slug:t(r),name:r};i.push(o),jQuery("#"+n).remove(),jQuery("#ts-advanced-table-categories-listing").nestedSortable("refresh")}else if(!e)return!1})}),jQuery("#ts-advanced-table-save-button").on("click",function(){var e=jQuery("#ts-advanced-table-categories-listing").nestedSortable("toHierarchy",{startDepthCount:0,attribute:"id",expression:/(category)[-=_](.+)/});e=encodeURIComponent(JSON.stringify(e));var t=encodeURIComponent(JSON.stringify(a)),s=encodeURIComponent(JSON.stringify(i));jQuery("#ts-advanced-table-categories-holder").val(e),jQuery("#ts-advanced-table-categories-changed").val(t),jQuery("#ts-advanced-table-categories-deleted").val(s)}),void 0!==jQuery.fn.krauttipster){var r=null,o="",l="",c="",d=0,h=0;jQuery("body").on("mouseenter touchstart",".ts-advanced-table-categories-info",function(e){if("true"==(r=jQuery(this)).attr("data-tooltipset"))try{r.krauttipster("destroy").attr("data-tooltipset","false")}catch(e){}o=r.parent().parent().attr("data-name"),l=r.parent().parent().attr("data-info"),l=void 0!=l&&""!=l?decodeURIComponent(TS_TablesWP_Base64.decode(l)):jQuery("#ts-advanced-table-categories-noinfo").text(),c='<div class="krauttipster-content-title">'+o+'</div><div class="krauttipster-content-text">'+l+"</div>",$Krauttipster_Position="top",d=0,h=0,"bottom"==$Krauttipster_Position?h+=s:"top"!=$Krauttipster_Position&&"left"!=$Krauttipster_Position&&"right"!=$Krauttipster_Position||(h-=s),r.krauttipster({animation:"fade",animationDuration:350,arrow:!0,content:c,contentAsHTML:!0,contentCloning:!1,debug:!1,delay:250,delayTouch:[500,1e3],distance:[0,0],functionInit:function(e,t){jQuery(t.origin).attr("data-tooltipset","true")},functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,functionPosition:function(e,t,a){return a.coord.top+=h,a.coord.left+=d,a},IEmin:6,interactive:!0,maxWidth:300,minWidth:75,multiple:!1,parent:null,plugins:["sideTip"],repositionOnScroll:!1,restoration:"none",selfDestruction:!0,side:$Krauttipster_Position,theme:"krauttipster-black",themeCustom:{color:"#ffffff",background:"#000000",border:"#000000"},timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:"hover",triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},updateAnimation:"rotate",zIndex:9999999}),r.krauttipster("show")}),jQuery("body").on("mouseleave touchend",".ts-advanced-table-categories-info",function(e){if("true"==(r=jQuery(this)).attr("data-tooltipset"))try{r.krauttipster("destroy").attr("data-tooltipset","false")}catch(e){}})}})}(jQuery);var TS_TablesWP_Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="";if(""==e||void 0==e)return t;var a,i,s,n,r,o,l,c=0;for(e=TS_TablesWP_Base64._utf8_encode(e);c<e.length;)n=(a=e.charCodeAt(c++))>>2,r=(3&a)<<4|(i=e.charCodeAt(c++))>>4,o=(15&i)<<2|(s=e.charCodeAt(c++))>>6,l=63&s,isNaN(i)?o=l=64:isNaN(s)&&(l=64),t=t+this._keyStr.charAt(n)+this._keyStr.charAt(r)+this._keyStr.charAt(o)+this._keyStr.charAt(l);return t},decode:function(e){var t="";if(""==e||void 0==e)return t;var a,i,s,n,r,o,l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)a=this._keyStr.indexOf(e.charAt(l++))<<2|(n=this._keyStr.indexOf(e.charAt(l++)))>>4,i=(15&n)<<4|(r=this._keyStr.indexOf(e.charAt(l++)))>>2,s=(3&r)<<6|(o=this._keyStr.indexOf(e.charAt(l++))),t+=String.fromCharCode(a),64!=r&&(t+=String.fromCharCode(i)),64!=o&&(t+=String.fromCharCode(s));return t=TS_TablesWP_Base64._utf8_decode(t)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",a=0;a<e.length;a++){var i=e.charCodeAt(a);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){for(var t="",a=0,i=c1=c2=0;a<e.length;)(i=e.charCodeAt(a))<128?(t+=String.fromCharCode(i),a++):i>191&&i<224?(c2=e.charCodeAt(a+1),t+=String.fromCharCode((31&i)<<6|63&c2),a+=2):(c2=e.charCodeAt(a+1),c3=e.charCodeAt(a+2),t+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),a+=3);return t}};!function(e){var t,a,i=e.event;t=i.special.debouncedresize={setup:function(){e(this).on("resize",t.handler)},teardown:function(){e(this).off("resize",t.handler)},handler:function(e,s){var n=this,r=arguments,o=function(){e.type="debouncedresize",i.dispatch.apply(n,r)};a&&clearTimeout(a),s?o():a=setTimeout(o,t.threshold)},threshold:150},e.event.special.debouncedresize.threshold=250}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery-ui/sortable"],e):e(window.jQuery)}(function(e){"use strict";function t(e,t,a){return e>t&&e<t+a}e.widget("mjs.nestedSortable",e.extend({},e.ui.sortable.prototype,{options:{disableParentChange:!1,doNotClear:!1,expandOnHover:700,isAllowed:function(){return!0},isTree:!1,listType:"ol",maxLevels:0,protectRoot:!1,rootID:null,rtl:!1,startCollapsed:!1,tabSize:20,branchClass:"mjs-nestedSortable-branch",collapsedClass:"mjs-nestedSortable-collapsed",disableNestingClass:"mjs-nestedSortable-no-nesting",errorClass:"mjs-nestedSortable-error",expandedClass:"mjs-nestedSortable-expanded",hoveringClass:"mjs-nestedSortable-hovering",leafClass:"mjs-nestedSortable-leaf",disabledClass:"mjs-nestedSortable-disabled"},_create:function(){var t,a=this;if(this.element.data("ui-sortable",this.element.data("mjs-nestedSortable")),!this.element.is(this.options.listType))throw t="nestedSortable: Please check that the listType option is set to your actual list type",new Error(t);this.options.isTree&&this.options.expandOnHover&&(this.options.tolerance="intersect"),e.ui.sortable.prototype._create.apply(this,arguments),this.options.isTree&&e(this.items).each(function(){var e=this.item,t=e.hasClass(a.options.collapsedClass),i=e.hasClass(a.options.expandedClass);e.children(a.options.listType).length?(e.addClass(a.options.branchClass),t||i||(a.options.startCollapsed?e.addClass(a.options.collapsedClass):e.addClass(a.options.expandedClass))):e.addClass(a.options.leafClass)})},_destroy:function(){return this.element.removeData("mjs-nestedSortable").removeData("ui-sortable"),e.ui.sortable.prototype._destroy.apply(this,arguments)},_mouseDrag:function(t){var a,i,s,n,r,o,l,c,d,h,u,g,p,f,v,m,b=this,y=this.options,C=!1,x=e(document);for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<y.scrollSensitivity?(C=this.scrollParent.scrollTop()+y.scrollSpeed,this.scrollParent.scrollTop(C)):t.pageY-this.overflowOffset.top<y.scrollSensitivity&&(C=this.scrollParent.scrollTop()-y.scrollSpeed,this.scrollParent.scrollTop(C)),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<y.scrollSensitivity?(C=this.scrollParent.scrollLeft()+y.scrollSpeed,this.scrollParent.scrollLeft(C)):t.pageX-this.overflowOffset.left<y.scrollSensitivity&&(C=this.scrollParent.scrollLeft()-y.scrollSpeed,this.scrollParent.scrollLeft(C))):(t.pageY-x.scrollTop()<y.scrollSensitivity?(C=x.scrollTop()-y.scrollSpeed,x.scrollTop(C)):e(window).height()-(t.pageY-x.scrollTop())<y.scrollSensitivity&&(C=x.scrollTop()+y.scrollSpeed,x.scrollTop(C)),t.pageX-x.scrollLeft()<y.scrollSensitivity?(C=x.scrollLeft()-y.scrollSpeed,x.scrollLeft(C)):e(window).width()-(t.pageX-x.scrollLeft())<y.scrollSensitivity&&(C=x.scrollLeft()+y.scrollSpeed,x.scrollLeft(C))),!1!==C&&e.ui.ddmanager&&!y.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),r=this.placeholder.offset().top,this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),this.hovering=this.hovering?this.hovering:null,this.mouseentered=!!this.mouseentered&&this.mouseentered,function(){var e=this.placeholder.parent().parent();e&&e.closest(".ui-sortable").length&&(o=e)}.call(this),l=this._getLevel(this.placeholder),c=this._getChildLevels(this.helper),u=document.createElement(y.listType),a=this.items.length-1;a>=0;a--)if(i=this.items[a],s=i.item[0],(n=this._intersectsWithPointer(i))&&i.instance===this.currentContainer){if(-1!==s.className.indexOf(y.disabledClass))if(2===n){if((d=this.items[a+1])&&d.item.hasClass(y.disabledClass))continue}else if(1===n&&(h=this.items[a-1])&&h.item.hasClass(y.disabledClass))continue;if(g=1===n?"next":"prev",!(s===this.currentItem[0]||this.placeholder[g]()[0]===s||e.contains(this.placeholder[0],s)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],s))){if(this.mouseentered||(e(s).mouseenter(),this.mouseentered=!0),y.isTree&&e(s).hasClass(y.collapsedClass)&&y.expandOnHover&&(this.hovering||(e(s).addClass(y.hoveringClass),this.hovering=window.setTimeout(function(){e(s).removeClass(y.collapsedClass).addClass(y.expandedClass),b.refreshPositions(),b._trigger("expand",t,b._uiHash())},y.expandOnHover))),this.direction=1===n?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;e(s).mouseleave(),this.mouseentered=!1,e(s).removeClass(y.hoveringClass),this.hovering&&window.clearTimeout(this.hovering),this.hovering=null,!y.protectRoot||this.currentItem[0].parentNode===this.element[0]&&s.parentNode!==this.element[0]?y.protectRoot||this._rearrange(t,i):this.currentItem[0].parentNode!==this.element[0]&&s.parentNode===this.element[0]?(e(s).children(y.listType).length||(s.appendChild(u),y.isTree&&e(s).removeClass(y.leafClass).addClass(y.branchClass+" "+y.expandedClass)),void 0!==(p="down"===this.direction?e(s).prev().children(y.listType):e(s).children(y.listType))[0]&&this._rearrange(t,null,p)):this._rearrange(t,i),this._clearEmpty(s),this._trigger("change",t,this._uiHash());break}}if(function(){var e=this.placeholder.prev();f=e.length?e:null}.call(this),null!=f)for(;"li"!==f[0].nodeName.toLowerCase()||-1!==f[0].className.indexOf(y.disabledClass)||f[0]===this.currentItem[0]||f[0]===this.helper[0];){if(!f[0].previousSibling){f=null;break}f=e(f[0].previousSibling)}if(function(){var e=this.placeholder.next();v=e.length?e:null}.call(this),null!=v)for(;"li"!==v[0].nodeName.toLowerCase()||-1!==v[0].className.indexOf(y.disabledClass)||v[0]===this.currentItem[0]||v[0]===this.helper[0];){if(!v[0].nextSibling){v=null;break}v=e(v[0].nextSibling)}return this.beyondMaxLevels=0,null==o||null!=v||y.protectRoot&&o[0].parentNode==this.element[0]||!(y.rtl&&this.positionAbs.left+this.helper.outerWidth()>o.offset().left+o.outerWidth()||!y.rtl&&this.positionAbs.left<o.offset().left)?null==f||f.hasClass(y.disableNestingClass)||!(f.children(y.listType).length&&f.children(y.listType).is(":visible")||!f.children(y.listType).length)||y.protectRoot&&this.currentItem[0].parentNode===this.element[0]||!(y.rtl&&this.positionAbs.left+this.helper.outerWidth()<f.offset().left+f.outerWidth()-y.tabSize||!y.rtl&&this.positionAbs.left>f.offset().left+y.tabSize)?this._isAllowed(o,l,l+c):(this._isAllowed(f,l,l+c+1),f.children(y.listType).length||(f[0].appendChild(u),y.isTree&&f.removeClass(y.leafClass).addClass(y.branchClass+" "+y.expandedClass)),r&&r<=f.offset().top?f.children(y.listType).prepend(this.placeholder):f.children(y.listType)[0].appendChild(this.placeholder[0]),void 0!==o&&this._clearEmpty(o[0]),this._trigger("change",t,this._uiHash())):(o.after(this.placeholder[0]),m=!o.children(y.listItem).children("li:visible:not(.ui-sortable-helper)").length,y.isTree&&m&&o.removeClass(this.options.branchClass+" "+this.options.expandedClass).addClass(this.options.leafClass),void 0!==o&&this._clearEmpty(o[0]),this._trigger("change",t,this._uiHash())),this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t){this.beyondMaxLevels&&(this.placeholder.removeClass(this.options.errorClass),this.domPosition.prev?e(this.domPosition.prev).after(this.placeholder):e(this.domPosition.parent).prepend(this.placeholder),this._trigger("revert",t,this._uiHash())),e("."+this.options.hoveringClass).mouseleave().removeClass(this.options.hoveringClass),this.mouseentered=!1,this.hovering&&window.clearTimeout(this.hovering),this.hovering=null,this._relocate_event=t,this._pid_current=e(this.domPosition.parent).parent().attr("id"),this._sort_current=this.domPosition.prev?e(this.domPosition.prev).next().index():0,e.ui.sortable.prototype._mouseStop.apply(this,arguments)},_intersectsWithSides:function(e){var a=this.options.isTree?.8:.5,i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height*a,e.height),s=t(this.positionAbs.top+this.offset.click.top,e.top-e.height*a,e.height),n=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:r&&("down"===r&&i||"up"===r&&s)},_contactContainers:function(){this.options.protectRoot&&this.currentItem[0].parentNode===this.element[0]||e.ui.sortable.prototype._contactContainers.apply(this,arguments)},_clear:function(){var t,a;for(e.ui.sortable.prototype._clear.apply(this,arguments),this._pid_current===this._uiHash().item.parent().parent().attr("id")&&this._sort_current===this._uiHash().item.index()||this._trigger("relocate",this._relocate_event,this._uiHash()),t=this.items.length-1;t>=0;t--)a=this.items[t].item[0],this._clearEmpty(a)},serialize:function(t){var a=e.extend({},this.options,t),i=this._getItemsAsjQuery(a&&a.connected),s=[];return e(i).each(function(){var t=(e(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/),i=(e(a.item||this).parent(a.listType).parent(a.items).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);t&&s.push((a.key||t[1])+"["+(a.key&&a.expression?t[1]:t[2])+"]="+(i?a.key&&a.expression?i[1]:i[2]:a.rootID))}),!s.length&&a.key&&s.push(a.key+"="),s.join("&")},toHierarchy:function(t){function a(t){var s,n=(e(t).attr(i.attribute||"id")||"").match(i.expression||/(.+)[-=_](.+)/),r=e(t).data();if(r.nestedSortableItem&&delete r.nestedSortableItem,n)return s={id:n[2]},s=e.extend({},s,r),e(t).children(i.listType).children(i.items).length>0&&(s.children=[],e(t).children(i.listType).children(i.items).each(function(){var e=a(this);s.children.push(e)})),s}var i=e.extend({},this.options,t),s=[];return e(this.element).children(i.items).each(function(){var e=a(this);s.push(e)}),s},toArray:function(t){function a(t,r,o){var l,c,d=o+1;if(e(t).children(i.listType).children(i.items).length>0&&(r++,e(t).children(i.listType).children(i.items).each(function(){d=a(e(this),r,d)}),r--),l=(e(t).attr(i.attribute||"id")||"").match(i.expression||/(.+)[-=_](.+)/),c=r===s?i.rootID:e(t).parent(i.listType).parent(i.items).attr(i.attribute||"id").match(i.expression||/(.+)[-=_](.+)/)[2],l){var h=e(t).children("div").data(),u=e.extend(h,{id:l[2],parent_id:c,depth:r,left:o,right:d});n.push(u)}return o=d+1}var i=e.extend({},this.options,t),s=i.startDepthCount||0,n=[],r=1;return i.excludeRoot||(n.push({item_id:i.rootID,parent_id:null,depth:s,left:r,right:2*(e(i.items,this.element).length+1)}),r++),e(this.element).children(i.items).each(function(){r=a(this,s,r)}),n=n.sort(function(e,t){return e.left-t.left})},_clearEmpty:function(t){var a=this.options,i=e(t).children(a.listType),s=i.has("li").length,n=a.doNotClear||s||a.protectRoot&&e(t)[0]===this.element[0];a.isTree&&function(t,a,i,s){s&&(a=[i,i=a][0]),e(t).removeClass(a).addClass(i)}(t,a.branchClass,a.leafClass,n),n||(i.parent().removeClass(a.expandedClass),i.remove())},_getLevel:function(e){var t,a=1;if(this.options.listType)for(t=e.closest(this.options.listType);t&&t.length>0&&!t.is(".ui-sortable");)a++,t=t.parent().closest(this.options.listType);return a},_getChildLevels:function(t,a){var i=this,s=this.options,n=0;return a=a||0,e(t).children(s.listType).children(s.items).each(function(e,t){n=Math.max(i._getChildLevels(t,a+1),n)}),a?n+1:n},_isAllowed:function(e,t,a){var i=this.options,s=this.placeholder.closest(".ui-sortable").nestedSortable("option","maxLevels"),n=this.currentItem.parent().parent();i.disableParentChange&&(void 0!==e&&!n.is(e)||void 0===e&&n.is("li"))||!i.isAllowed(this.placeholder,e,this.currentItem)?(this.placeholder.addClass(i.errorClass),this.beyondMaxLevels=s<a&&0!==s?a-s:1):s<a&&0!==s?(this.placeholder.addClass(i.errorClass),this.beyondMaxLevels=a-s):(this.placeholder.removeClass(i.errorClass),this.beyondMaxLevels=0)}})),e.mjs.nestedSortable.prototype.options=e.extend({},e.ui.sortable.prototype.options,e.mjs.nestedSortable.prototype.options)}),function(e){e.fn.TS_TablesWP_TagEditorInput=function(){var t=" ",a=e(this),i=parseInt(a.css("fontSize")),s=e("<span/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:a.css("fontSize"),fontFamily:a.css("fontFamily"),fontWeight:a.css("fontWeight"),letterSpacing:a.css("letterSpacing"),whiteSpace:"nowrap"});return s.insertAfter(a),a.bind("keyup keydown focus",function(){if(t!==(t=a.val())){s.text(t);var e=s.width()+i;20>e&&(e=20),e!=a.width()&&a.width(e)}})},e.fn.TS_TablesWP_TagEditor=function(t,a,s){function n(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var r,o=e.extend({},e.fn.TS_TablesWP_TagEditor.defaults,t);if(o.dregex=new RegExp("["+o.delimiter.replace("-","-")+"]","g"),"string"==typeof t){var l=[];return this.each(function(){var i=e(this),n=i.data("options"),r=i.next(".tag-editor");if("getTags"==t)l.push({field:i[0],editor:r,tags:r.data("tags")});else if("addTag"==t){if(n.maxTags&&r.data("tags").length>=n.maxTags)return!1;e('<li><div class="tag-editor-spacer">&nbsp;'+n.delimiter[0]+'</div><div class="tag-editor-tag"></div><div class="tag-editor-delete"><i></i></div></li>').appendTo(r).find(".tag-editor-tag").html('<input type="text" maxlength="'+n.maxLength+'">').addClass("active").find("input").val(a).blur(),s?e(".placeholder",r).remove():r.click()}else"removeTag"==t?(e(".tag-editor-tag",r).filter(function(){return e(this).text()==a}).closest("li").find(".tag-editor-delete").click(),s||r.click()):"destroy"==t&&i.removeClass("tag-editor-hidden-src").removeData("options").off("focus.tag-editor").next(".tag-editor").remove()}),"getTags"==t?l:this}return window.getSelection&&e(document).off("keydown.tag-editor").on("keydown.tag-editor",function(t){if(8==t.which||46==t.which||t.ctrlKey&&88==t.which){try{var a=getSelection(),s="BODY"==document.activeElement.tagName?e(a.getRangeAt(0).startContainer.parentNode).closest(".tag-editor"):0}catch(t){s=0}if(a.rangeCount>0&&s&&s.length){var n=[],r=a.toString().split(s.prev().data("options").dregex);for(i=0;i<r.length;i++){var o=e.trim(r[i]);o&&n.push(o)}return e(".tag-editor-tag",s).each(function(){~e.inArray(e(this).text(),n)&&e(this).closest("li").find(".tag-editor-delete").click()}),!1}}}),this.each(function(){function t(){!o.placeholder||l.length||e(".deleted, .placeholder, input",c).length||c.append('<li class="placeholder"><div>'+o.placeholder+"</div></li>")}function a(a){var i=l.toString();l=e(".tag-editor-tag:not(.deleted)",c).map(function(t,a){var i=e.trim(e(this).hasClass("active")?e(this).find("input").val():e(a).text());if(i)return i}).get(),c.data("tags",l),s.val(l.join(o.delimiter[0])),a||i!=l.toString()&&o.onChange(s,c,l),t()}function i(t){var i,r=t.closest("li"),d=t.val().replace(/ +/," ").split(o.dregex),h=t.data("old_tag"),u=l.slice(0),g=!1;d=d.filter(function(e){return e});for(var p=0;p<d.length;p++)if(f=e.trim(d[p]).slice(0,o.maxLength),o.forceLowercase&&(f=f.toLowerCase()),o.forceNumbersOnly&&(f=f.replace(/\D/g,"")),i=o.beforeTagSave(s,c,u,h,f),f=i||f,!1!==i&&f&&(o.removeDuplicates&&~e.inArray(f,u)&&e(".tag-editor-tag:not(.active)",c).each(function(t){e(this).text()==f&&e(this).closest("li").remove()}),u.push(f),r.before('<li><div class="tag-editor-spacer">&nbsp;'+o.delimiter[0]+'</div><div class="tag-editor-tag">'+n(f)+'</div><div class="tag-editor-delete"><i></i></div></li>'),o.maxTags&&u.length>=o.maxTags)){g=!0;break}t.attr("maxlength",o.maxLength).removeData("old_tag").val(""),g?t.blur():t.focus(),a()}var s=e(this),l=[],c=e("<ul "+(o.clickDelete?'oncontextmenu="return false;" ':"")+'class="tag-editor"></ul>').insertAfter(s);s.addClass("tag-editor-hidden-src").data("options",o).on("focus.tag-editor",function(){c.click()}),c.append('<li style="width:1px">&nbsp;</li>');var d='<li><div class="tag-editor-spacer">&nbsp;'+o.delimiter[0]+'</div><div class="tag-editor-tag"></div><div class="tag-editor-delete"><i></i></div></li>';c.on("click",function(t,a){var i,s,n=99999;if(!window.getSelection||""==getSelection())return o.maxTags&&c.data("tags").length>=o.maxTags?(c.find("input").blur(),!1):(r=!0,e("input:focus",c).blur(),!!r&&(r=!0,e(".placeholder",c).remove(),a&&a.length?s="before":e(".tag-editor-tag",c).each(function(){var r=e(this),o=r.offset(),l=o.left,c=o.top;t.pageY>=c&&t.pageY<=c+r.height()&&(t.pageX<l?(s="before",i=l-t.pageX):(s="after",i=t.pageX-l-r.width()),i<n&&(n=i,a=r))}),"before"==s?e(d).insertBefore(a.closest("li")).find(".tag-editor-tag").click():"after"==s?e(d).insertAfter(a.closest("li")).find(".tag-editor-tag").click():e(d).appendTo(c).find(".tag-editor-tag").click(),!1))}),c.on("click",".tag-editor-delete",function(i){if(e(this).prev().hasClass("active"))return e(this).closest("li").find("input").caretme(-1),!1;var n=e(this).closest("li"),r=n.find(".tag-editor-tag");return!1!==o.beforeTagDelete(s,c,l,r.text())&&(r.addClass("deleted").animate({width:0},o.animateDelete,function(){n.remove(),t()}),a(),!1)}),o.clickDelete&&c.on("mousedown",".tag-editor-tag",function(i){if(i.ctrlKey||i.which>1){var n=e(this).closest("li"),r=n.find(".tag-editor-tag");return!1!==o.beforeTagDelete(s,c,l,r.text())&&(r.addClass("deleted").animate({width:0},o.animateDelete,function(){n.remove(),t()}),a(),!1)}}),c.on("click",".tag-editor-tag",function(t){if(o.clickDelete&&(t.ctrlKey||t.which>1))return!1;if(!e(this).hasClass("active")){var a=e(this).text(),i=Math.abs((e(this).offset().left-t.pageX)/e(this).width()),s=parseInt(a.length*i),r=e(this).html('<input type="text" maxlength="'+o.maxLength+'" value="'+n(a)+'">').addClass("active").find("input");if(r.data("old_tag",a).TS_TablesWP_TagEditorInput().focus().caretme(s),o.autocomplete){var l=e.extend({},o.autocomplete),d="select"in l?o.autocomplete.select:"";l.select=function(t,a){d&&d(t,a),setTimeout(function(){c.trigger("click",[e(".active",c).find("input").closest("li").next("li").find(".tag-editor-tag")])},20)},r.autocomplete(l)}}return!1}),c.on("blur","input",function(d){d.stopPropagation();var h=e(this),u=(h.closest("li"),h.data("old_tag")),g=e.trim(h.val().replace(/ +/," ").replace(o.dregex,o.delimiter[0]));if(g){if(g.indexOf(o.delimiter[0])>=0)return void i(h);if(g!=u)if(o.forceLowercase&&(g=g.toLowerCase()),o.forceNumbersOnly&&(g=g.replace(/\D/g,"")),cb_val=o.beforeTagSave(s,c,l,u,g),g=cb_val||g,!1===cb_val||""==g){if(u)return h.val(u).focus(),r=!1,void a();try{h.closest("li").remove()}catch(d){}u&&a()}else o.removeDuplicates&&e(".tag-editor-tag:not(.active)",c).each(function(t){e(this).text()==g&&e(this).closest("li").remove()})}else{if(u&&!1===o.beforeTagDelete(s,c,l,u))return h.val(u).focus(),r=!1,void a();try{h.closest("li").remove()}catch(d){}u&&a()}h.parent().html(n(g)).removeClass("active"),g!=u&&a(),t()});var h;c.on("paste","input",function(t){e(this).removeAttr("maxlength"),(h=e(this)).trigger("change"),setTimeout(function(){i(h)},30)});var u;c.on("keypress","input",function(t){o.delimiter.indexOf(String.fromCharCode(t.which))>=0&&(u=e(this),setTimeout(function(){i(u)},20))}),c.on("keydown","input",function(t){var a=e(this);if((37==t.which||!o.autocomplete&&38==t.which)&&!a.caretme()||8==t.which&&!a.val()){return(i=a.closest("li").prev("li").find(".tag-editor-tag")).length?i.click().find("input").caretme(-1):!a.val()||o.maxTags&&c.data("tags").length>=o.maxTags||e(d).insertBefore(a.closest("li")).find(".tag-editor-tag").click(),!1}if((39==t.which||!o.autocomplete&&40==t.which)&&a.caretme()==a.val().length){return(n=a.closest("li").next("li").find(".tag-editor-tag")).length?n.click().find("input").caretme(0):a.val()&&c.click(),!1}if(9==t.which){if(t.shiftKey){var i=a.closest("li").prev("li").find(".tag-editor-tag");if(i.length)i.click().find("input").caretme(0);else{if(!a.val()||o.maxTags&&c.data("tags").length>=o.maxTags)return s.attr("disabled","disabled"),void setTimeout(function(){s.removeAttr("disabled")},30);e(d).insertBefore(a.closest("li")).find(".tag-editor-tag").click()}return!1}if((n=a.closest("li").next("li").find(".tag-editor-tag")).length)n.click().find("input").caretme(0);else{if(!a.val())return;c.click()}return!1}if(!(46!=t.which||e.trim(a.val())&&a.caretme()!=a.val().length)){var n=a.closest("li").next("li").find(".tag-editor-tag");return n.length?n.click().find("input").caretme(0):a.val()&&c.click(),!1}if(13==t.which)return c.trigger("click",[a.closest("li").next("li").find(".tag-editor-tag")]),o.maxTags&&c.data("tags").length>=o.maxTags&&c.find("input").blur(),!1;if(36!=t.which||a.caretme()){if(35==t.which&&a.caretme()==a.val().length)c.find(".tag-editor-tag").last().click();else if(27==t.which)return a.val(a.data("old_tag")?a.data("old_tag"):"").blur(),!1}else c.find(".tag-editor-tag").first().click()});for(var g=o.initialTags.length?o.initialTags:s.val().split(o.dregex),p=0;p<g.length&&!(o.maxTags&&p>=o.maxTags);p++){var f=e.trim(g[p].replace(/ +/," "));f&&(o.forceLowercase&&(f=f.toLowerCase()),l.push(f),c.append('<li><div class="tag-editor-spacer">&nbsp;'+o.delimiter[0]+'</div><div class="tag-editor-tag">'+n(f)+'</div><div class="tag-editor-delete"><i></i></div></li>'))}a(!0),o.sortable&&e.fn.sortable&&c.sortable({distance:5,cancel:".tag-editor-spacer, input",helper:"clone",update:function(){a()}})})},e.fn.TS_TablesWP_TagEditor.defaults={initialTags:[],maxTags:0,maxLength:50,delimiter:",;",placeholder:"",forceLowercase:!0,forceNumbersOnly:!1,removeDuplicates:!0,clickDelete:!1,animateDelete:175,sortable:!0,autocomplete:null,onChange:function(){},beforeTagSave:function(){},beforeTagDelete:function(){}}}(jQuery),function(e,t){var a=document.createElement("input"),i={setSelectionRange:"setSelectionRange"in a||"selectionStart"in a,createTextRange:"createTextRange"in a||"selection"in document},s=/\r\n/g,n=/\r/g,r=function(t){return void 0!==t.value?t.value:e(t).text()},o=function(e,t){var a=r(e).replace(n,"").length;return void 0===t&&(t=a),(t=Math.floor(t))<0&&(t=a+t),t<0&&(t=0),t>a&&(t=a),t},l=function(e,t,a,i){this.start=e||0,this.end=t||0,this.length=a||0,this.text=i||""};l.prototype.toString=function(){return JSON.stringify(this,null,"    ")};var c=function(e){if(e)return i.setSelectionRange?function(e){return e.selectionStart}(e):i.createTextRange?function(e){var t,a,i,n,o;return e.focus(),e.focus(),(t=document.selection.createRange())&&t.parentElement()===e?(i=r(e),n=i.length,(a=e.createTextRange()).moveToBookmark(t.getBookmark()),(o=e.createTextRange()).collapse(!1),a.compareEndPoints("StartToEnd",o)>-1?i.replace(s,"\n").length:-a.moveStart("character",-n)):0}(e):void 0},d=function(e,t){e.focus(),t=o(e,t),i.setSelectionRange?function(e,t){e.setSelectionRange(t,t)}(e,t):i.createTextRange&&function(e,t){var a=e.createTextRange();a.move("character",t),a.select()}(e,t)},h=function(e){if(e)return i.setSelectionRange?function(e){var t=new l;t.start=e.selectionStart,t.end=e.selectionEnd;var a=Math.min(t.start,t.end),i=Math.max(t.start,t.end);return t.length=i-a,t.text=r(e).substring(a,i),t}(e):i.createTextRange?function(e){var t=new l;e.focus();var a=document.selection.createRange();if(a&&a.parentElement()===e){var i,s,n,o,c=0,d=0,h=r(e);i=h.length,s=h.replace(/\r\n/g,"\n"),(n=e.createTextRange()).moveToBookmark(a.getBookmark()),(o=e.createTextRange()).collapse(!1),n.compareEndPoints("StartToEnd",o)>-1?c=d=i:(c=-n.moveStart("character",-i),c+=s.slice(0,c).split("\n").length-1,n.compareEndPoints("EndToEnd",o)>-1?d=i:(d=-n.moveEnd("character",-i),d+=s.slice(0,d).split("\n").length-1)),c-=h.substring(0,c).split("\r\n").length-1,d-=h.substring(0,d).split("\r\n").length-1,t.start=c,t.end=d,t.length=t.end-t.start,t.text=s.substr(t.start,t.length)}return t}(e):void 0},u=function(e,t,a){t=o(e,t),a=o(e,a),i.setSelectionRange?function(e,t,a){e.setSelectionRange(t,a)}(e,t,a):i.createTextRange&&function(e,t,a){var i=e.createTextRange();i.moveEnd("textedit",-1),i.moveStart("character",t),i.moveEnd("character",a-t),i.select()}(e,t,a)};e.extend(e.fn,{caretme:function(){var t=this.filter("input, textarea");if(0===arguments.length){var a=t.get(0);return c(a)}if("number"==typeof arguments[0]){var i=arguments[0];t.each(function(e,t){d(t,i)})}else{var s=arguments[0];t.each(function(t,a){!function(t,a){var i=c(t),s=r(t).replace(n,""),o=+(i+a.length+(s.length-i)),l=+t.getAttribute("maxlength");if(function(e,t){return e.hasAttribute?e.hasAttribute(t):void 0!==e[t]}(t,"maxlength")&&o>l){var h=a.length-(o-l);a=a.substr(0,h)}!function(t,a){void 0!==t.value?t.value=a:e(t).text(a)}(t,s.substr(0,i)+a+s.substr(i)),d(t,i+a.length)}(a,s)})}return this},rangeme:function(){var t=this.filter("input, textarea");if(0===arguments.length){var a=t.get(0);return h(a)}if("number"==typeof arguments[0]){var i=arguments[0],s=arguments[1];t.each(function(e,t){u(t,i,s)})}else{var n=arguments[0];t.each(function(t,a){!function(t,a){var i=e(t),s=i.val(),n=h(t),r=+(n.start+a.length+(s.length-n.end)),o=+i.attr("maxlength");if(i.is("[maxlength]")&&r>o){var l=a.length-(r-o);a=a.substr(0,l)}var c=s.substr(0,n.start),d=s.substr(n.end);i.val(c+a+d);var g=n.start,p=g+a.length;u(t,n.length?g:p,p)}(a,n)})}return this},selectAll:function(){return this.each(function(t,a){!function(t){var a=e(t);a.is("input, textarea")||t.select?a.select():i.setSelectionRange?function(e){var t=window.getSelection(),a=document.createRange();a.selectNodeContents(e),t.removeAllRanges(),t.addRange(a)}(t):i.createTextRange&&function(e){var t=document.body.createTextRange();t.moveToElementText(e),t.select()}(t)}(a)})}}),e.extend(e,{deselectAll:function(){return document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this}})}(window.jQuery||window.Zepto||window.$);